html
  head
    include head.pug

    script.
      window.onload = () => {
        html2canvas(document.getElementById('box'),{
          onrendered: canvas => {
            document.getElementById("download").href = canvas.toDataURL()
            document.getElementById('box').classList.add('box')
            document.getElementById('loading').style.display = "none"
            document.getElementById('logo').style.display = "none"
            document.getElementById('genby').style.display = "none"
          }
        })
      }
    style(type="text/css").
      .pad {padding: 16px;}
      .box {
        overflow-x: scroll;
        max-width: 100%;
      }
  body
    div#loading(style="position: fixed; width: 100%; height: 100%; background: #ffffffCC; top: 0; left: 0; z-index: 1;")
      span(style="font-size: 24pt; top: calc(50% - 12pt); position: absolute; left: calc(50% - 80px); color: black;") 読み込み中
    div.uk-section
      div.uk-container.uk-container-expand
        a(href="/")
          img(src="/sus2image.png",style="height: 128px;")
        div#box(style="width: fit-content; margin-top: 16px; background: #ffffff;").pad
          span(style="font-size: 28pt;")= meta.TITLE
          span(style="font-size: 16pt; margin-left: 16px;")= meta.DESIGNER
          img(src="/sus2image.png",style="margin-top: 5px; height: 28pt; float: right;")#logo
          span(style="font-size: 16pt; margin-top: 9px; margin-right: 6px; float: right;")#genby Generated by
          div#score(style=`display: flex; align-items: flex-end; margin-top: 16px;`)
            - for (let i = 0; i < Math.ceil(height/2304); i++)
              div(style="margin: 0 16px; width: 68px; height: fit-content;")
                div(style="width: 68px; margin-left: auto; overflow: hidden; height: 576px;")
                  img(src=`data:image/svg+xml,${image}`, style=`vertical-align: bottom; width: 68px; position: relative; top: ${-(height / 4 - 576 * i - 584 + 8)}px;`)
        a(download=`${meta.TITLE}.png`, style="margin-left: 4px; margin-top: 4px;")#download.uk-button.uk-button-primary 画像を保存
